{% extends 'core/base.html' %}

{% block title %}{{ post.title }} - {{ block.super }}{% endblock %}

{% block content %}
<div class="container">
    <article class="card">
        <header class="card-header">
            <h1>{{ post.title }}</h1>
            {# 在 post_detail.html 的 <h1> 标签下面添加 #}

{% if post.cover_image %}
    <img src="{{ post.cover_image.url }}" alt="{{ post.title }}" style="width: 100%; height: auto; border-radius: 8px; margin-bottom: 1em;">
{% endif %}
            <div class="meta">
                发布于: {{ post.published_date|date:"Y年m月d日" }} | 
                分类: {{ post.get_category_display }} |
                作者: {{ post.author }}
            </div>
        </header>
        <section class="card-body">
            {{ post.content|linebreaks }}
        </section>
        {# --- 新增附件下载链接 --- #}
        {% if post.attachment %}
            <footer class="card-footer" style="margin-top: 2em; padding-top: 1em; border-top: 1px solid #eee;">
                <strong>相关附件下载:</strong>
                <br>
                <a href="{{ post.attachment.url }}" download>{{ post.attachment.name|cut:"post_attachments/" }}</a>
            </footer>
        {% endif %}
        {# --- 结束新增 --- #}
    </article>

    <a href="{% url 'core:post_list' %}" class="back-link">&larr; 返回新闻列表</a>
</div>
{% endblock %}